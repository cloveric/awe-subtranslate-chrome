/* === Awe SubTranslate - Injected Styles (Visual Refresh) === */

:root {
  --imt-inject-accent: #0f766e;
  --imt-inject-accent-soft: rgba(15, 118, 110, 0.22);
  --imt-inject-danger: #dc2626;
  --imt-inject-muted: #5f6f7d;
}

/* 译文容器 */
font.imt-target {
  display: inline;
  margin: 0;
  padding: 0;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

/* 块级元素中的译文换行显示 */
p font.imt-target,
h1 font.imt-target,
h2 font.imt-target,
h3 font.imt-target,
h4 font.imt-target,
h5 font.imt-target,
h6 font.imt-target,
li font.imt-target,
td font.imt-target,
th font.imt-target,
div font.imt-target,
blockquote font.imt-target,
dd font.imt-target,
figcaption font.imt-target {
  display: block;
  margin-top: 3px;
}

/* ====== 翻译主题 ====== */

/* 默认：下划线 */
font.imt-target.imt-theme-underline {
  color: var(--imt-inject-muted);
  border-bottom: 2px solid var(--imt-inject-accent);
  padding-bottom: 1px;
}

/* 虚线 */
font.imt-target.imt-theme-dashed {
  color: var(--imt-inject-muted);
  border-bottom: 2px dashed rgba(15, 118, 110, 0.68);
  padding-bottom: 1px;
}

/* 高亮 */
font.imt-target.imt-theme-highlight {
  background: linear-gradient(180deg, rgba(255, 248, 182, 0) 0%, rgba(255, 248, 182, 0.95) 72%);
  color: #2f3d4a;
  padding: 0 3px;
  border-radius: 3px;
}

/* 弱化 */
font.imt-target.imt-theme-weakening {
  opacity: 0.62;
}

/* 斜体 */
font.imt-target.imt-theme-italic {
  font-style: italic;
  color: var(--imt-inject-muted);
}

/* 加粗 */
font.imt-target.imt-theme-bold {
  font-weight: 700;
  color: #344454;
}

/* 模糊（学习模式） */
font.imt-target.imt-theme-mask {
  filter: blur(4.5px);
  transition: filter 0.24s ease;
}

font.imt-target.imt-theme-mask:hover {
  filter: blur(0);
}

/* 纸张 */
font.imt-target.imt-theme-paper {
  background: linear-gradient(180deg, #fffffe 0%, #f8fafc 100%);
  box-shadow: 0 2px 6px rgba(15, 23, 42, 0.1);
  padding: 2px 5px;
  border-radius: 5px;
  color: #2f3f4f;
}

/* 引用 */
font.imt-target.imt-theme-blockquote {
  border-left: 3px solid var(--imt-inject-accent);
  padding-left: 8px;
  color: #4f5f6f;
}

/* ====== 翻译状态 ====== */

font.imt-target.imt-loading {
  color: #7d8c99;
  animation: imt-pulse 1.3s infinite;
}

@keyframes imt-pulse {
  0%,
  100% {
    opacity: 0.38;
  }
  50% {
    opacity: 1;
  }
}

font.imt-target.imt-error {
  color: var(--imt-inject-danger);
  text-decoration: underline wavy var(--imt-inject-danger);
}

font.imt-separator {
  display: inline;
  margin: 0 5px;
  color: #b4bfca;
  font-size: 0.82em;
}

/* ====== 仅译文模式 ====== */
[data-imt-state="translation"] .imt-original {
  display: none;
}

/* ====== 视频字幕 ====== */
.imt-subtitle-container {
  position: absolute;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99999;
  text-align: center;
  pointer-events: none;
  max-width: 80%;
}

.imt-subtitle-original {
  color: #fff;
  font-size: 1.1em;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8), -1px -1px 2px rgba(0, 0, 0, 0.8);
  margin-bottom: 4px;
}

.imt-subtitle-translated {
  color: #ffe08a;
  font-size: 0.95em;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.85), -1px -1px 2px rgba(0, 0, 0, 0.85);
}

/* ====== 翻译工具栏浮动按钮 ====== */
.imt-float-btn {
  position: fixed !important;
  right: 24px !important;
  bottom: 80px !important;
  width: 58px !important;
  height: 58px !important;
  border-radius: 50% !important;
  background: linear-gradient(145deg, #14b8a6, #0f766e) !important;
  color: #f4fffd !important;
  border: 1px solid rgba(255, 255, 255, 0.35) !important;
  cursor: pointer !important;
  z-index: 999999 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-shadow: 0 14px 24px rgba(15, 118, 110, 0.35) !important;
  transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  font-size: 25px !important;
  line-height: 1 !important;
  overflow: hidden !important;
}

.imt-float-btn::before {
  content: "";
  position: absolute;
  width: 120%;
  height: 120%;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.26);
  transform: scale(0.75);
  animation: imt-ring 2.2s infinite;
}

.imt-float-btn:hover {
  transform: scale(1.08) !important;
  box-shadow: 0 18px 30px rgba(15, 118, 110, 0.4) !important;
}

.imt-float-btn.imt-active {
  background: linear-gradient(145deg, #ef4444, #b91c1c) !important;
  box-shadow: 0 14px 24px rgba(185, 28, 28, 0.34) !important;
}

@keyframes imt-ring {
  0% {
    opacity: 0.5;
    transform: scale(0.75);
  }
  70% {
    opacity: 0.08;
    transform: scale(1.08);
  }
  100% {
    opacity: 0;
    transform: scale(1.15);
  }
}

/* ====== 翻译服务 Toast 提示 ====== */
.imt-toast {
  position: fixed;
  top: 18px;
  right: 18px;
  z-index: 2147483647;
  background: rgba(17, 24, 39, 0.82);
  color: #f4f7fb;
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 14px;
  font-family: "Trebuchet MS", "Noto Sans SC", "PingFang SC", "Microsoft YaHei", sans-serif;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 10px 20px rgba(15, 23, 42, 0.28);
  border: 1px solid rgba(255, 255, 255, 0.16);
  backdrop-filter: blur(8px);
  animation: imt-toast-in 0.25s ease;
  pointer-events: none;
  max-width: min(420px, 84vw);
}

.imt-toast.imt-toast-out {
  animation: imt-toast-out 0.25s ease forwards;
}

.imt-toast .imt-toast-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: #2dd4bf;
  flex-shrink: 0;
}

@keyframes imt-toast-in {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes imt-toast-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-8px);
  }
}

@media (max-width: 768px) {
  .imt-float-btn {
    right: 16px !important;
    bottom: 68px !important;
    width: 52px !important;
    height: 52px !important;
    font-size: 22px !important;
  }

  .imt-toast {
    top: 12px;
    right: 12px;
    font-size: 13px;
    padding: 10px 12px;
  }
}
